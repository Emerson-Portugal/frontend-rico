"use strict";(self.webpackChunksertchile=self.webpackChunksertchile||[]).push([[961],{4961:(E,C,o)=>{o.d(C,{J7:()=>e.J,LP:()=>p,gK:()=>b});var e=o(9337),t=o(4438),d=o(8119),u=o(8336),g=o(1626),c=o(6549);let p=(()=>{class l{constructor(){this.machineService=(0,t.WQX)(u.t),this.title="Tipo de Maquina",this.columns=[{label:"ID",property:"id",type:"text",visible:!0,cssClasses:["font-medium"]},{label:"Codigo",property:"code",type:"text",visible:!0,cssClasses:["font-medium"]},{label:"Nombre",property:"name",type:"text",visible:!0}],this.paginator=(0,t.vPA)({currentPage:1,pageSize:10,totalCount:0,totalPages:0}),this.machines=(0,t.vPA)([]),this.getSelectedBehaviour=(0,t.hFB)(d.qm.KEEP_BEHAVIOUR),this.getSelected=(0,t.CGW)(),this.createBehaviour=(0,t.hFB)(d.qm.KEEP_BEHAVIOUR),this.create=(0,t.CGW)()}ngOnInit(){this.getAll()}getAll(s=""){const a=this.paginator(),n=(new g.Nl).set("page",a.currentPage).set("pageSize",a.pageSize).set("name",s);this.machineService.getAll(n).subscribe({next:({data:i})=>{this.machines.set(i.results),this.paginator.set({currentPage:i.pageNumber,pageSize:i.pageSize,totalCount:i.totalCount,totalPages:i.totalPages})}})}onCurrentPageChange(s){this.paginator.update(a=>({...a,currentPage:s})),this.getAll()}onSearchByText(s){this.paginator.update(a=>({...a,currentPage:1})),this.getAll(s)}static{this.\u0275fac=function(a){return new(a||l)}}static{this.\u0275cmp=t.VBU({type:l,selectors:[["app-machine-list"]],inputs:{getSelectedBehaviour:[t.Mj6.SignalBased,"getSelectedBehaviour"],createBehaviour:[t.Mj6.SignalBased,"createBehaviour"]},outputs:{getSelected:"getSelected",create:"create"},standalone:!0,features:[t.aNF],decls:1,vars:6,consts:[[3,"elementsChange","changeCurrentPage","rowClickCustomBehaviour","createElementCustomBehaviour","searchByText","title","elements","columns","paginator","rowClickBehaviour","createElementBehaviour"]],template:function(a,n){1&a&&(t.j41(0,"app-custom-table",0),t.mxI("elementsChange",function(m){return t.DH7(n.machines,m)||(n.machines=m),m}),t.bIt("changeCurrentPage",function(m){return n.onCurrentPageChange(m)})("rowClickCustomBehaviour",function(m){return n.getSelected.emit(m)})("createElementCustomBehaviour",function(){return n.create.emit()})("searchByText",function(m){return n.onSearchByText(m)}),t.k0s()),2&a&&(t.Y8G("title",n.title),t.R50("elements",n.machines),t.Y8G("columns",n.columns)("paginator",n.paginator())("rowClickBehaviour",n.getSelectedBehaviour())("createElementBehaviour",n.createBehaviour()))},dependencies:[c.rR]})}}return l})();var h=o(4006),B=o(8834),M=o(9213);function v(l,r){if(1&l){const s=t.RV6();t.j41(0,"app-machine-list",4),t.bIt("getSelected",function(n){t.eBV(s);const i=t.XpG();return t.Njj(i.onSelectElement(n))})("create",function(){t.eBV(s);const n=t.XpG();return t.Njj(n.toggleViewMode())}),t.k0s()}if(2&l){const s=t.XpG();t.Y8G("getSelectedBehaviour",s.CustomBehaviourEnum.CHANGE_BEHAVIOUR)("createBehaviour",s.CustomBehaviourEnum.CHANGE_BEHAVIOUR)}}let b=(()=>{class l{constructor(){this.dialogRef=(0,t.WQX)(h.CP),this.machineService=(0,t.WQX)(u.t),this.title="Tipo de Maquina",this.EditViewModeEnum=d.A0,this.CustomBehaviourEnum=d.qm,this.viewMode=(0,t.vPA)("list")}onSelectElement(s){this.dialogRef.close(s)}getMachineByCode(s){this.machineService.getByCode(s).subscribe({next:({data:a})=>this.dialogRef.close(a)})}toggleViewMode(){this.viewMode.set("list")}static{this.\u0275fac=function(a){return new(a||l)}}static{this.\u0275cmp=t.VBU({type:l,selectors:[["app-machine-modal"]],standalone:!0,features:[t.aNF],decls:7,vars:2,consts:[["mat-dialog-title","",1,"flex","items-center"],[1,"headline","m-0","flex-auto"],["mat-dialog-close","","mat-icon-button","","type","button",1,"text-secondary"],["svgIcon","mat:close"],[3,"getSelected","create","getSelectedBehaviour","createBehaviour"]],template:function(a,n){if(1&a&&(t.j41(0,"div",0)(1,"h2",1),t.EFF(2),t.k0s(),t.j41(3,"button",2),t.nrm(4,"mat-icon",3),t.k0s()(),t.j41(5,"mat-dialog-content"),t.DNE(6,v,1,2),t.k0s()),2&a){let i;t.R7$(2),t.JRh(n.title),t.R7$(4),t.vxM(6,"list"===(i=n.viewMode())?6:-1)}},dependencies:[p,B.Hl,B.iY,h.hM,h.tx,h.BI,h.Yi,M.m_,M.An]})}}return l})()},9337:(E,C,o)=>{o.d(C,{J:()=>l});var e=o(4438),t=o(5416),d=o(8498),u=o(8336),g=o(8119),c=o(6549);let p=(()=>{class r{constructor(){this.title="Maquina",this.icon="mat:settings",this.tabs=[{label:"Informacion General",onClick:()=>{},active:!0,disabled:!1}]}static{this.\u0275fac=function(n){return new(n||r)}}static{this.\u0275cmp=e.VBU({type:r,selectors:[["app-machine-form-header"]],standalone:!0,features:[e.aNF],decls:1,vars:3,consts:[[3,"title","icon","tabs"]],template:function(n,i){1&n&&e.nrm(0,"app-custom-form-header",0),2&n&&e.Y8G("title",i.title)("icon",i.icon)("tabs",i.tabs)},dependencies:[c.U$]})}}return r})();var h=o(9417),B=o(9042),M=o(2153);let v=(()=>{class r{constructor(){this.fb=(0,e.WQX)(h.ok),this.code=(0,e.geq)(""),this.isCreate=(0,e.geq)(!0),this.machine=e.geq.required(),this.form=this.fb.group({code:["",[h.k0.required,h.k0.pattern(g.Dk.ALPHA_NUMERIC)]],name:["",[h.k0.required,h.k0.pattern(g.Dk.TEXT_ONLY)]]}),this.formSubscription=null,this.updateFormValuesEffect=(0,e.QZP)(()=>{if(this.isCreate())return;const a=this.machine();!a||M.zf.isObjectEmpty(a)||(this.form.patchValue({code:this.code(),name:a.name}),this.updateFormValuesEffect.destroy())}),this.updateCodeStatusEffect=(0,e.QZP)(()=>{this.isCreate()||(this.form.get("code").disable(),this.updateCodeStatusEffect.destroy())})}ngOnInit(){this.formSubscription=this.form.valueChanges.subscribe(()=>{"code"in this.machine()?this.machine.update(a=>({...a,code:this.form.get("code").value??"",name:this.form.get("name").value??""})):this.machine.update(a=>({...a,name:this.form.get("name").value??""}))})}ngOnDestroy(){this.formSubscription?.unsubscribe()}static{this.\u0275fac=function(n){return new(n||r)}}static{this.\u0275cmp=e.VBU({type:r,selectors:[["app-machine-form-body"]],inputs:{code:[e.Mj6.SignalBased,"code"],isCreate:[e.Mj6.SignalBased,"isCreate"],machine:[e.Mj6.SignalBased,"machine"]},outputs:{code:"codeChange",isCreate:"isCreateChange",machine:"machineChange"},standalone:!0,features:[e.aNF],decls:4,vars:4,consts:[[1,"flex","w-full","card"],[1,"flex","w-1/2","flex-col","mx-5","py-5","gap-y-5",3,"formGroup"],["label","C\xf3digo","controlName","code",3,"form","disabled"],["label","Nombre","controlName","name",3,"form"]],template:function(n,i){1&n&&(e.j41(0,"div",0)(1,"form",1),e.nrm(2,"app-custom-input",2)(3,"app-custom-input",3),e.k0s()()),2&n&&(e.R7$(),e.Y8G("formGroup",i.form),e.R7$(),e.Y8G("form",i.form)("disabled",!0),e.R7$(),e.Y8G("form",i.form))},dependencies:[c.H7,h.X1,h.qT,h.cb,h.j4,B.fS]})}}return r})();function b(r,s){1&r&&e.nrm(0,"app-machine-form-header")}let l=(()=>{class r{constructor(){this.machineService=(0,e.WQX)(u.t),this.snackBar=(0,e.WQX)(t.UG),this.router=(0,e.WQX)(d.Ix),this.route=(0,e.WQX)(d.nX),this.code=(0,e.hFB)(""),this.machine=(0,e.geq)({name:""}),this.showToolbar=(0,e.hFB)(!0),this.showBreadcrumbs=(0,e.hFB)(!0),this.showActionButtons=(0,e.hFB)(!0),this.showHeader=(0,e.geq)(!0),this.editViewMode=(0,e.geq)(g.A0.VIEW_ONLY),this.isCreate=(0,e.EWP)(()=>!this.code()),this.canEdit=(0,e.EWP)(()=>this.editViewMode()!==g.A0.VIEW_ONLY),this.child=(0,e.ebz)(v),this.fetchMachineEffect=(0,e.QZP)(()=>{this.code()&&(this.getByCode(),this.fetchMachineEffect.destroy())})}getByCode(){this.machineService.getByCode(this.code()).subscribe({next:({data:a})=>{this.machine.set({name:a.name})}})}onSaveElement(){const a=this.machine();if(a){if(this.isCreate())return void this.machineService.create(a).subscribe({next:()=>{this.snackBar.open("La m\xe1quina se creo correctamente","OK",{duration:3e3}),this.onCleanUp()}});this.machineService.update(this.code(),a).subscribe({next:()=>{this.snackBar.open("La m\xe1quina se actualizo correctamente","OK",{duration:3e3}),this.onCleanUp()}})}}onDeleteElement(){this.machineService.delete(this.code()).subscribe({next:()=>{this.snackBar.open("La m\xe1quina se elimino correctamente","OK",{duration:3e3}),this.router.navigate(["../../"],{relativeTo:this.route})}})}onCleanUp(){if(this.isCreate())return this.machine.set({name:""}),void this.child()?.form.reset();this.editViewMode.set(g.A0.VIEW_ONLY)}static{this.\u0275fac=function(n){return new(n||r)}}static{this.\u0275cmp=e.VBU({type:r,selectors:[["app-machine-form"]],viewQuery:function(n,i){1&n&&e.wEZ(i.child,v,5),2&n&&e.NyB()},inputs:{code:[e.Mj6.SignalBased,"code"],machine:[e.Mj6.SignalBased,"machine"],showToolbar:[e.Mj6.SignalBased,"showToolbar"],showBreadcrumbs:[e.Mj6.SignalBased,"showBreadcrumbs"],showActionButtons:[e.Mj6.SignalBased,"showActionButtons"],showHeader:[e.Mj6.SignalBased,"showHeader"],editViewMode:[e.Mj6.SignalBased,"editViewMode"]},outputs:{machine:"machineChange",showHeader:"showHeaderChange",editViewMode:"editViewModeChange"},standalone:!0,features:[e.aNF],decls:3,vars:10,consts:[["customClasses","flex flex-col gap-y-5 bg-transparent shadow-none","title","Tipo de Maquinas",3,"editViewModeChange","saveElement","deleteElement","showActionButtons","showBreadcrumbs","showToolbar","editViewMode"],[3,"machineChange","machine","code","isCreate"]],template:function(n,i){1&n&&(e.j41(0,"app-custom-layout",0),e.mxI("editViewModeChange",function(f){return e.DH7(i.editViewMode,f)||(i.editViewMode=f),f}),e.bIt("saveElement",function(){return i.onSaveElement()})("deleteElement",function(){return i.onDeleteElement()}),e.DNE(1,b,1,0,"app-machine-form-header"),e.j41(2,"app-machine-form-body",1),e.mxI("machineChange",function(f){return e.DH7(i.machine,f)||(i.machine=f),f}),e.k0s()()),2&n&&(e.Y8G("showActionButtons",i.showActionButtons())("showBreadcrumbs",i.showBreadcrumbs())("showToolbar",i.showToolbar()),e.R50("editViewMode",i.editViewMode),e.R7$(),e.vxM(1,i.showHeader()?1:-1),e.R7$(),e.AVh("disabled",!i.canEdit()),e.R50("machine",i.machine),e.Y8G("code",i.code())("isCreate",i.isCreate()))},dependencies:[p,v,c.jc]})}}return r})()},8336:(E,C,o)=>{o.d(C,{t:()=>d});var e=o(4438),t=o(6921);let d=(()=>{class u{constructor(){this.api=(0,e.WQX)(t.G),this.url="produccion/maquinas"}getAll(c){return this.api.getAll(`${this.url}/`,c)}getByCode(c){return this.api.get(`${this.url}/${c}/`)}create(c){return this.api.post(`${this.url}/`,c)}update(c,p){return this.api.put(`${this.url}/${c}/`,p)}delete(c){return this.api.delete(`${this.url}/${c}/`)}static{this.\u0275fac=function(p){return new(p||u)}}static{this.\u0275prov=e.jDH({token:u,factory:u.\u0275fac,providedIn:"root"})}}return u})()}}]);